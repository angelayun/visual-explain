webpackJsonp([1],{"1z8E":function(t,e,n){t.exports=n.p+"static/img/github-viz.05ed285.png"},"4/hK":function(t,e){},"5qOL":function(t,e){},"7zck":function(t,e){},FL5m:function(t,e){},Ibdn:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),r={name:"App",data:function(){return{sourceCodeLink:"https://github.com/ssthouse/visual-explain",title:"Visual Explain"}},methods:{toMainPage:function(){this.$router.push("/")}},mounted:function(){window.$d3=this.$d3}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",{attrs:{id:"app"}},[e("top-bar",{attrs:{sourceCodeLink:this.sourceCodeLink,title:this.title},on:{"to-main-page":this.toMainPage}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var a=n("VU/8")(r,o,!1,function(t){n("Pfar")},null,null).exports,s=n("/ocq"),l=n("Zrlr"),d=n.n(l),c=n("wxAW"),u=n.n(c),h=function(){function t(e,n){d()(this,t),this.name=e,this._children=n,this.visible=!1,this.key=1e3*Math.random()}return u()(t,[{key:"addChild",value:function(t){this._children||(this._children=[]),this._children.push(t)}},{key:"filterChildren",value:function(){this._children&&(this.children=this._children.filter(function(t){return t.visible}),this.children&&this.children.forEach(function(t){return t.filterChildren()}))}},{key:"hide",value:function(t){this.name!==t?this._children&&this._children.forEach(function(e){return e.hide(t)}):this.visible=!1}},{key:"show",value:function(t){this.name!==t?this._children&&this._children.forEach(function(e){return e.show(t)}):this.visible=!0}}]),t}(),p=function(){function t(e){d()(this,t),this.rootDomNode=e}return u()(t,[{key:"restore",value:function(){this.rootDomNode.restore()}},{key:"hide",value:function(t){this.rootDomNode.hide(t)}},{key:"show",value:function(t){this.rootDomNode.show(t)}},{key:"getData",value:function(){return!1===this.rootDomNode.visible?null:(this.rootDomNode.filterChildren(),this.rootDomNode)}}]),t}(),f=new h("html",null),v=new h("body",null);f.addChild(v);var g=new h("head",null);f.addChild(g);var m=new h("title",null),y=new h("style",null);g.addChild(m),g.addChild(y);var k=new h("h1",null),x=new h("ul",null);v.addChild(k),v.addChild(x);var w=new h("li",null);x.addChild(w);var N=new p(f),C=function(){function t(e,n,i){d()(this,t),this.contentStr=e,this.stepArray=n,this.domTreeData=i,this.initData()}return u()(t,[{key:"initData",value:function(){this.rows=this.contentStr.split("\n"),this.curStep=-1}},{key:"restore",value:function(){this.curStep=-1,this.hideAll()}},{key:"hideAll",value:function(){var t=this;this.stepArray.forEach(function(e){t.domTreeData.hide(e.nodeName)})}},{key:"stepForward",value:function(){this.curStep>=this.stepArray.length-1||(this.curStep+=1,this.domTreeData.show(this.stepArray[this.curStep].nodeName))}},{key:"stepBackword",value:function(){this.curStep<=-1||(this.curStep-=1,this.domTreeData.hide(this.stepArray[this.curStep+1].nodeName))}},{key:"isLastStep",value:function(){return this.curStep>=this.stepArray.length-1}},{key:"getCurContent",value:function(){this.getCurRows().join("\n")}},{key:"getCurRows",value:function(){for(var t=0,e=0;e<=this.curStep;e++)t+=this.stepArray[e].count;return this.getAllRows().slice(0,t)}},{key:"getCurDomTreeData",value:function(){return this.domTreeData.getData()}},{key:"getAllRows",value:function(){return this.rows}}]),t}(),S=new C("<!DOCTYPE html>\n<html>\n    <head>\n      <title>Web app lifecycle</title>\n      <style>\n          #list { color: green;}\n          #second { color: red;}\n      </style>\n    </head>\n    <body>\n        <h1>head one</h1>\n        <ul id=\"list\"></ul>\n        <script>\n            var liElement = document.createElement(\"li\");\n            liElement.textContent = 'I am a li';\n            document.getElementById('list').appendChild(liElement);\n        <\/script>\n    </body>\n</html>",[{count:2,nodeName:"html"},{count:1,nodeName:"head"},{count:1,nodeName:"title"},{count:4,nodeName:"style"},{count:1,nodeName:""},{count:1,nodeName:"body"},{count:1,nodeName:"h1"},{count:1,nodeName:"ul"},{count:5,nodeName:"li"},{count:2,nodeName:""}],N),b={name:"Root",data:function(){return{yScale:null,codeView:null,domTree:null,codeSnippet:S,nodeRadius:30,nodeWidth:80,nodeHeight:140}},mounted:function(){this.domTree=this.$d3.select("#domTree"),this.codeView=this.$d3.select("#codeView"),this.linkContainer=this.$d3.select("#linkContainer"),this.circleContainer=this.$d3.select("#circleContainer"),this.textContainer=this.$d3.select("#textContainer"),window.code=this},methods:{previousStep:function(){this.codeSnippet.stepBackword(),this.updateView(this.codeSnippet.getCurRows()),this.updateDomTree()},nextStep:function(){this.codeSnippet.stepForward(),this.updateView(this.codeSnippet.getCurRows()),this.updateDomTree()},autoPlay:function(){this.clearDomTree(),this.codeSnippet.restore(),this.autoNextStep()},clearDomTree:function(){this.codeView.selectAll("*").remove(),this.linkContainer.selectAll("*").remove(),this.circleContainer.selectAll("*").remove(),this.textContainer.selectAll("*").remove()},autoNextStep:function(){var t=this;this.codeSnippet.isLastStep()||setTimeout(function(){t.nextStep(),t.autoNextStep()},1e3)},updateView:function(t){var e=this.codeView.selectAll("text").data(t);e.style("stroke","black"),e.enter().append("text").text(function(t){return t}).style("stroke","blue").style("font-family","monospace").style("stroke-width",.5).attr("x",-100).style("opacity",0).attr("xml:space","preserve").transition().attr("font-size","20px").attr("x","30").attr("y",function(t,e){return 30*(e+1)}).style("opacity",1).style("stroke","black").style("stroke-width",.5),e.exit().transition().style("stroke","red").attr("x","-100px").attr("y",0).style("opacity",0).remove()},updateDomTree:function(){if(this.codeSnippet.getCurDomTreeData()){var t=this.$d3.hierarchy(this.codeSnippet.getCurDomTreeData()),e=this.$d3.tree().nodeSize([this.nodeWidth,this.nodeHeight])(t);this.drawDomTree(e.descendants(),e.links())}else this.drawDomTree([],[])},drawDomTree:function(t,e){var n=this.domTree.style("width"),i=parseInt(n.substring(0,n.length-2))/2,r=this.linkContainer.selectAll(".link").data(e),o=this;r.enter().append("path").attr("class","link").attr("fill","transparent").attr("stroke","black").merge(r).attr("d",function(t,e){return o.$d3.linkVertical().x(function(t){return t.x+i}).y(function(t){return t.y+100}).source(function(t){return{x:t.source.x,y:t.source.y}}).target(function(){return{x:t.target.x,y:t.target.y}})(t)}),r.exit().remove();var a=this.circleContainer.selectAll("circle").data(t,function(t){return t.data.key});a.enter().append("circle").attr("class","node").attr("fill","white").attr("stroke","black").attr("r",this.nodeRadius).merge(a).transition().attr("cx",function(t){return t.x+i}).attr("cy",function(t){return t.y+100}),a.exit().remove();var s=this.textContainer.selectAll("text").data(t,function(t){return t.data.key});s.enter().append("text").attr("text-anchor","middle").attr("font-size","20px").attr("dy",".4em").merge(s).transition().attr("x",function(t){return t.x+i}).attr("y",function(t){return t.y+100}).text(function(t){return t.data.name}),s.exit().remove()}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"domRender"}},[n("div",{attrs:{id:"control-panel"}},[n("v-tooltip",{attrs:{bottom:""}},[n("v-btn",{attrs:{slot:"activator",icon:"",color:"primary"},on:{click:function(e){t.previousStep()}},slot:"activator"},[n("v-icon",[t._v("navigate_before")])],1),t._v(" "),n("span",[t._v("Step Backward")])],1),t._v(" "),n("v-tooltip",{attrs:{bottom:""}},[n("v-btn",{attrs:{slot:"activator",icon:"",color:"primary"},on:{click:function(e){t.nextStep()}},slot:"activator"},[n("v-icon",[t._v("navigate_next")])],1),t._v(" "),n("span",[t._v("Step Forward")])],1),t._v(" "),n("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.autoPlay()}}},[t._v("Auto play")])],1),t._v(" "),n("div",{attrs:{id:"svg-container"}},[n("svg",{attrs:{id:"codeView"}}),t._v(" "),n("svg",{attrs:{id:"domTree"}},[n("g",{attrs:{id:"linkContainer"}}),t._v(" "),n("g",{attrs:{id:"circleContainer"}}),t._v(" "),n("g",{attrs:{id:"textContainer"}})])])])},staticRenderFns:[]};var A=n("VU/8")(b,_,!1,function(t){n("5qOL")},null,null).exports,D=function(){function t(e,n){d()(this,t),this.svgNode=e,this.d3=n}return u()(t,[{key:"initData",value:function(){var t=this;this.links=[{source:"Microsoft",target:"Amazon",type:"licensing"},{source:"Microsoft",target:"HTC",type:"licensing"},{source:"Samsung",target:"Apple",type:"suit"},{source:"Motorola",target:"Apple",type:"suit"},{source:"Nokia",target:"Apple",type:"resolved"},{source:"HTC",target:"Apple",type:"suit"},{source:"Kodak",target:"Apple",type:"suit"},{source:"Microsoft",target:"Barnes & Noble",type:"suit"},{source:"Microsoft",target:"Foxconn",type:"suit"},{source:"Oracle",target:"Google",type:"suit"},{source:"Apple",target:"HTC",type:"suit"},{source:"Microsoft",target:"Inventec",type:"suit"},{source:"Samsung",target:"Kodak",type:"resolved"},{source:"LG",target:"Kodak",type:"resolved"},{source:"RIM",target:"Kodak",type:"suit"},{source:"Sony",target:"LG",type:"suit"},{source:"Kodak",target:"LG",type:"resolved"},{source:"Apple",target:"Nokia",type:"resolved"},{source:"Qualcomm",target:"Nokia",type:"resolved"},{source:"Apple",target:"Motorola",type:"suit"},{source:"Microsoft",target:"Motorola",type:"suit"},{source:"Motorola",target:"Microsoft",type:"suit"},{source:"Huawei",target:"ZTE",type:"suit"},{source:"Ericsson",target:"ZTE",type:"suit"},{source:"Kodak",target:"Samsung",type:"resolved"},{source:"Apple",target:"Samsung",type:"suit"},{source:"Kodak",target:"RIM",type:"suit"},{source:"Nokia",target:"Qualcomm",type:"suit"}],this.nodes={},this.links.forEach(function(e){e.source=t.nodes[e.source]||(t.nodes[e.source]={name:e.source}),e.target=t.nodes[e.target]||(t.nodes[e.target]={name:e.target})}),console.log(this.nodes)}},{key:"initView",value:function(){this.svgNode.append("defs").selectAll("marker").data(["suit","licensing","resolved"]).enter().append("marker").attr("id",function(t){return t}).attr("viewBox","0 -5 10 10").attr("refX",22).attr("refY",-1.5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5"),this.path=this.svgNode.append("g").selectAll("path").data(this.links).enter().append("path").attr("class",function(t){return"link "+t.type}).attr("marker-end",function(t){return"url(#"+t.type+")"}),this.circle=this.svgNode.append("g").selectAll("circle").data(this.d3.values(this.nodes)).enter().append("circle").attr("r",10).style("cursor","pointer").call(this.enableDragFunc()),this.text=this.svgNode.append("g").selectAll("text").data(this.d3.values(this.nodes)).enter().append("text").attr("x",12).attr("y",".31em").text(function(t){return t.name})}},{key:"linkArc",value:function(t){var e=t.target.x-t.source.x,n=t.target.y-t.source.y,i=Math.sqrt(e*e+n*n);return"M"+t.source.x+","+t.source.y+"A"+i+","+i+" 0 0,1 "+t.target.x+","+t.target.y}},{key:"draw",value:function(){var t=this;this.initData(),this.initView();var e=parseInt(this.svgNode.style("width").substring(0,this.svgNode.style("width").length-2)),n=parseInt(this.svgNode.style("height").substring(0,this.svgNode.style("height").length-2));function i(t){return"translate("+t.x+","+t.y+")"}var r=this.d3.forceLink(this.links).distance(80).strength(.2).iterations(3);this.force=this.d3.forceSimulation(this.d3.values(this.nodes)).force("charge",this.d3.forceManyBody().strength(50)).force("collide",this.d3.forceCollide().radius(50)).force("link",r).force("center",this.d3.forceCenter().x(e/2).y(n/2)).on("tick",function(){t.path&&(t.path.attr("d",t.linkArc),t.circle.attr("transform",i),t.text.attr("transform",i))}),this.svgNode.attr("width",e).attr("height",n),this.enableDragFunc()}},{key:"enableDragFunc",value:function(){var t=this;return this.d3.drag().on("start",function(e){t.d3.event.active||t.force.alphaTarget(.3).restart(),e.fx=t.d3.event.x,e.fy=t.d3.event.y}).on("drag",function(e){e.fx=t.d3.event.x,e.fy=t.d3.event.y}).on("end",function(e){t.d3.event.active||t.force.alphaTarget(0),e.fx=null,e.fy=null})}},{key:"drawSampleNodes",value:function(){var t=this.svgNode.append("g").attr("class","sampleContainer"),e=[{source:{name:"Nokia",x:200,y:100},target:{name:"Qualcomm",x:300,y:100},title:"Still in suit:",type:"suit"},{source:{name:"Qualcomm",x:200,y:200},target:{name:"Nokia",x:300,y:200},title:"Already resolved:",type:"resolved"},{source:{name:"Microsoft",x:200,y:300},target:{name:"Amazon",x:300,y:300},title:"Locensing now:",type:"licensing"}],n={};e.forEach(function(t,e){n[t.source.name+e]=t.source,n[t.target.name+e]=t.target}),t.selectAll("path").data(e).enter().append("path").attr("class",function(t){return"link "+t.type}).attr("marker-end",function(t){return"url(#"+t.type+")"}).attr("d",this.linkArc),t.selectAll("circle").data(this.d3.values(n)).enter().append("circle").attr("r",10).style("cursor","pointer").attr("transform",function(t){return"translate("+t.x+", "+t.y+")"}),t.selectAll(".companyTitle").data(this.d3.values(n)).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.x}).attr("y",function(t){return t.y+24}).text(function(t){return t.name}),t.selectAll(".title").data(e).enter().append("text").attr("class","msg-title").style("text-anchor","end").attr("x",function(t){return t.source.x-30}).attr("y",function(t){return t.source.y+5}).text(function(t){return t.title})}}]),t}(),z={name:"PatentSuit",data:function(){return{graphGenerator:null}},methods:{},mounted:function(){var t=this.$d3.select(".main-svg");this.graphGenerator=new D(t,this.$d3),this.graphGenerator.draw(),this.graphGenerator.drawSampleNodes()}},T={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"patent-suit"}},[e("svg",{staticClass:"main-svg"})])},staticRenderFns:[]};var V=n("VU/8")(z,T,!1,function(t){n("g3VM")},null,null).exports,L=(function(){function t(e,n){d()(this,t),this.rootNode=e,this.stepCallback=n}u()(t,[{key:"start",value:function(){if(this.rootNode&&this.stepCallback)for(var t=[this.rootNode];0!==t.length;){var e=t.pop();this.stepCallback(e),e.childrenNodes.forEach(function(e){t.push(e)})}}}])}(),function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];d()(this,t),this.value=e,this.childrenNodes=n,this.id=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}()}return u()(t,[{key:"addChild",value:function(t){this.childrenNodes.push(t)}}]),t}());var M={props:["node","nodeId","nodeWidth"],data:function(){return{showControlPanel:!1,childNodeValue:0}},methods:{onDelete:function(){this.$emit("delete",this.nodeId)},onAddChildNode:function(){var t=new L(this.childNodeValue);this.$emit("addChildNode",this.node,t)},onHover:function(){},onHoverOut:function(){this.showControlPanel=!1}}},E={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tree-node",style:{left:t.node.x+"px",top:t.node.y+"px",width:t.nodeWidth+"px",height:t.nodeWidth+"px"},on:{mouseover:t.onHover,mouseout:t.onHoverOut}},[n("span",[t._v(t._s(t.node.value))]),t._v(" "),n("div",{class:{"control-panel":!0,hidden:!t.showControlPanel}},[n("button",{staticClass:"delete-btn",on:{click:t.onDelete}},[t._v("delete")]),t._v(" "),n("div",{staticClass:"add-child-panel"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.childNodeValue,expression:"childNodeValue"}],attrs:{placeholder:"child value"},domProps:{value:t.childNodeValue},on:{input:function(e){e.target.composing||(t.childNodeValue=e.target.value)}}}),t._v(" "),n("button",{on:{click:t.onAddChildNode}},[t._v("add child")])])])])},staticRenderFns:[]};var R={name:"treeEditor",components:{"node-editor":n("VU/8")(M,E,!1,function(t){n("zYUX")},null,null).exports},data:function(){return{width:300,height:300,nodeWidth:48,sampleTree:(t=new L(1,[]),t.addChild(new L(2,[new L(4,[]),new L(5,[])])),t.addChild(new L(3,[new L(6,[]),new L(7,[])])),t),rootNode:null,svgRootNode:null,nodeList:[]};var t},methods:{initSampleTree:function(){var t=this.$d3.hierarchy(this.sampleTree,function(t){return t.childrenNodes}),e=this.$d3.tree().size([this.width,this.height])(t);this.drawLinks(e.links()),this.nodeList=e.descendants()},drawNodes:function(t){var e=this.rootNode.selectAll(".tree-node").data(t);e.enter().append("div").merge(e).attr("title",function(t){return t.value}).attr("class","tree-node").style("left",function(t){return t.x+"px"}).style("top",function(t){return t.y+"px"}),e.exit().remove()},drawLinks:function(t){var e=this.svgRootNode.selectAll(".link").data(t),n=this;e.enter().append("path").attr("class","link").attr("fill","transparent").attr("stroke","black").merge(e).attr("d",function(t,e){return n.$d3.linkVertical().x(function(t){return t.x+n.nodeWidth/2}).y(function(t){return t.y+2*n.nodeWidth/3}).source(function(t){return{x:t.source.x,y:t.source.y}}).target(function(){return{x:t.target.x,y:t.target.y}})(t)}),e.exit().remove()},onNodeDelete:function(t){console.log(t),this.nodeList=this.nodeList.filter(function(e){return e.data.id!==t})},onChildNodeAdd:function(t,e){console.log(t),console.log(e)}},mounted:function(){this.rootNode=this.$d3.select("#tree-container"),this.svgRootNode=this.$d3.select("#svg-container"),this.initSampleTree()}},$={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tree-container",attrs:{id:"tree-container"}},[n("svg",{attrs:{id:"svg-container"}}),t._v(" "),t._l(t.nodeList,function(e){return[n("node-editor",{key:e.data.id,attrs:{node:e,nodeId:e.data.id,"node-width":t.nodeWidth},on:{delete:t.onNodeDelete,addChildNode:t.onChildNodeAdd}})]})],2)},staticRenderFns:[]};var I=n("VU/8")(R,$,!1,function(t){n("XZz2")},null,null).exports,F=n("8U58"),W=n.n(F),P=(n("4/hK"),n("5IAE"),n("vwbq")),H=n("xzFa"),B=function(){function t(e,n){d()(this,t),this.rootNode=e,this.domId=n,this.nodeList=null,this.links=null,this.svgDom=null,this.g=null,this.refreshTimer=null,this.addNodeId()}return u()(t,[{key:"rootNode",value:function(t){return t?(this.rootNode=t,this.addNodeId(),this):this.rootNode}},{key:"addNodeId",value:function(){for(var t=[this.rootNode];0!==t.length;){var e=t.pop();e.id=H.guid(),e.childrenNodes.forEach(function(e){t.push(e)})}}},{key:"domId",value:function(t){return t?(this.domId=t,this):this.domId}},{key:"nodeSize",value:function(){return this.nodeSize||this.getWidth()/8}},{key:"stack",value:function(t){return t?(this.stack=t,this):this.stack}},{key:"empty",value:function(){for(var t=[this.rootNode];0!==t.length;){var e=t.pop();e.highlight=!1,e.childrenNodes.forEach(function(e){t.push(e)})}this.updateView()}},{key:"_initDom",value:function(){this.domId&&(this.nodeSize=24,this.padding=40,P.select("#"+this.domId).selectAll("*").remove(),this.svgDom=P.select("#"+this.domId).append("svg").style("width","100%").style("height","100%"),this.g=this.svgDom.append("g").attr("transform","translate("+this.padding+", "+this.padding+")"))}},{key:"start",value:function(){this._initDom(),this._recalcLayout(),this.updateView()}},{key:"getWidth",value:function(){return this.svgDom.node().getBoundingClientRect().width-2*this.padding}},{key:"getHeight",value:function(){return this.svgDom.node().getBoundingClientRect().height-2*this.padding}},{key:"dft",value:function(){var t=this;this.stack.push(this.rootNode),setTimeout(function(){t.dftLoop()},1e3)}},{key:"dftLoop",value:function(){var t=this;if(0!==this.stack.length){var e=this.stack.pop();this.hightlightNode(e),setTimeout(function(){t.stack.push(e.childrenNodes),setTimeout(function(){return t.dftLoop()},1e3)},1e3)}}},{key:"hightlightNode",value:function(t){t.highlight=!0,this.updateView()}},{key:"updateView",value:function(){this._drawLinks(),this._drawNodes()}},{key:"_recalcLayout",value:function(){var t=P.hierarchy(this.rootNode,function(t){return t.childrenNodes}),e=P.tree().size([this.getWidth(),this.getHeight()])(t);this.nodeList=e.descendants(),this.links=e.links()}},{key:"_drawNodes",value:function(){if(this.nodeList){var t=this.g.selectAll("circle").data(this.nodeList);t.enter().append("circle").merge(t).attr("title",function(t){return t.value}).attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",this.nodeSize).attr("stroke","transparent").attr("fill",function(t){return t.data.highlight?"red":"#2196f3"}),t.exit().remove();var e=this.g.selectAll("text").data(this.nodeList);e.enter().append("text").merge(e).text(function(t){return t.data.value}).attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("text-anchor","middle").attr("dy","0.35em").attr("fill","white"),e.exit().remove()}}},{key:"_drawLinks",value:function(){if(this.links){var t=this.g.selectAll(".link").data(this.links);t.enter().append("path").attr("class","link").attr("fill","transparent").attr("stroke","black").merge(t).attr("d",function(t,e){return P.linkVertical().x(function(t){return t.x}).y(function(t){return t.y}).source(function(t){return{x:t.source.x,y:t.source.y}}).target(function(){return{x:t.target.x,y:t.target.y}})(t)}),t.exit().remove()}}}]),t}(),U=n("Gu7T"),G=n.n(U),J=function(){function t(e){d()(this,t),this.array=e,this.transition=P.transition().duration(600).ease(P.easeLinear)}return u()(t,[{key:"domId",value:function(t){return arguments?(this.domId=t,this):this.domId}},{key:"toText",value:function(t){return t?(this.toTextAccess=t,this):this.toTextAccess||function(t){t.toString()}}},{key:"push",value:function(t){var e;t instanceof Array?(e=this.array).push.apply(e,G()(t)):this.array.push(t);return this.updateView(),this}},{key:"pop",value:function(){var t=this.array.pop();return this.updateView(),t}},{key:"empty",value:function(){return this.array=[],this.updateView(),this}},{key:"_initAttr",value:function(){this.padding=10,this.blockSize=60,this.xScale=P.scaleLinear().domain([0,this.array.length]).range([0,this.array.length*this.blockSize]),this.yScale=P.scaleLinear().domain([0,this.array.length]).range([0,this.array.length*this.blockSize])}},{key:"_initDom",value:function(){var t=P.select("#"+this.domId);t.selectAll("*").remove(),this.svg=t.append("svg").attr("width","100%").attr("height","100%"),this.g=this.svg.append("g")}},{key:"start",value:function(){this.svg||this._initDom()}},{key:"updateView",value:function(){var t=this;this._initAttr();var e=this.g.selectAll("rect").data(this.array,function(t){return t.id});e.enter().append("rect").transition(this.transition).attr("x",function(e){return t.width/2-t.blockSize/2}).attr("y",function(e,n){return t.height-t.yScale(n)-t.blockSize}).attr("width",this.blockSize).attr("height",this.blockSize).attr("fill","darkgray").attr("stroke","white"),e.transition(this.transition).attr("x",function(e){return t.width/2-t.blockSize/2}).attr("y",function(e,n){return t.height-t.yScale(n)-t.blockSize}).attr("width",this.blockSize).attr("height",this.blockSize).attr("stroke","white"),e.exit().transition(this.transition).attr("fill","red").attr("y",function(e,n){return t.height-t.yScale(n)-t.blockSize}).style("opacity",0).remove();var n=this.g.selectAll("text").data(this.array,function(t){return t.id});n.enter().append("text").text(function(e){return t.toTextAccess(e)}).transition(this.transition).attr("x",function(e){return t.width/2}).attr("y",function(e,n){return t.height-t.yScale(n)-t.blockSize/2}).attr("text-anchor","middle").attr("dy","0.35em").attr("fill","white"),n.text(function(e){return t.toTextAccess(e)}).transition(this.transition).attr("x",function(e){return t.width/2}).attr("y",function(e,n){return t.height-t.yScale(n)-t.blockSize/2}).attr("text-anchor","middle").attr("dy","0.35em"),n.exit().transition(this.transition).remove()}},{key:"length",get:function(){return this.array.length}},{key:"width",get:function(){return this.svg.node().getBoundingClientRect().width-2*this.padding}},{key:"height",get:function(){return this.svg.node().getBoundingClientRect().height-2*this.padding}}]),t}(),K={name:"DftExplain",components:{"tree-editor":I,"array-viz":J},data:function(){return{treeJsonCode:'{\n  "value": 1,\n  "childrenNodes": [\n    {\n      "value": 2,\n      "childrenNodes": [\n        {\n          "value": 4,\n          "childrenNodes": []\n        },\n        {\n          "value": 5,\n          "childrenNodes": []\n        }\n      ]\n    },\n    {\n      "value": 3,\n      "childrenNodes": [\n        {\n          "value": 6,\n          "childrenNodes": []\n        },\n        {\n          "value": 7,\n          "childrenNodes": []\n        }\n      ]\n    }\n  ]\n}\n',dftCode:"export class Dft {\n  constructor(rootNode, stepCallback) {\n    this.rootNode = rootNode\n    this.stepCallback = stepCallback\n  }\n\n  start() {\n    if (!this.rootNode || !this.stepCallback) {\n      return\n    }\n    const stack = [this.rootNode]\n    while (stack.length !== 0) {\n      const curNode = stack.pop()\n      this.stepCallback(curNode)\n      curNode.childrenNodes.forEach(element => {\n        stack.push(element)\n      })\n    }\n  }\n}",jsonCodeMirror:null,dftCodeMirror:null,arrayViz:null,treeViz:null}},methods:{initCodeMirror:function(){this.jsonCodeMirror=W.a.fromTextArea(this.$refs.treeJsonCode,{mode:"javascript",lineNumbers:!0}),this.dftCodeMirror=W.a.fromTextArea(this.$refs.dftCode,{mode:"javascript",lineNumbers:!0,readOnly:!0})},startDft:function(){var t=JSON.parse(this.jsonCodeMirror.getValue());this.treeViz=new B(t,"tree-viz"),this.treeViz.start(),this.arrayViz=new J([]).domId("array-viz").toText(function(t){return t.value}),this.arrayViz.start(),this.treeViz.stack(this.arrayViz).dft()}},mounted:function(){this.initCodeMirror()}},O={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dft-container"},[n("div",{staticClass:"left-panel"},[n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.treeJsonCode,expression:"treeJsonCode"}],ref:"treeJsonCode",domProps:{value:t.treeJsonCode},on:{input:function(e){e.target.composing||(t.treeJsonCode=e.target.value)}}})]),t._v(" "),n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dftCode,expression:"dftCode"}],ref:"dftCode",domProps:{value:t.dftCode},on:{input:function(e){e.target.composing||(t.dftCode=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"right-panel"},[t._m(0),t._v(" "),n("div",{staticClass:"control-panel"},[n("v-btn",{on:{click:t.startDft}},[t._v("Start DFT")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"viz-panel"},[e("div",{attrs:{id:"tree-viz"}}),this._v(" "),e("div",{attrs:{id:"array-viz"}})])}]};var j=n("VU/8")(K,O,!1,function(t){n("FL5m")},null,null).exports,q=n("1z8E"),X=n.n(q),Z=n("wxyz"),Q=n.n(Z),Y={name:"Root",data:function(){return{links:[{title:"Dom Render",to:"/list/domRender",imgSrc:"https://raw.githubusercontent.com/ssthouse/d3-blog/master/dom-render/img/step9.png"},{title:"Mobile Patent Suit",to:"/list/patent-suit",imgSrc:"https://raw.githubusercontent.com/ssthouse/d3-blog/master/mobile-patent-suit/img/row_display.png"},{title:"Visual Github Repo",to:"https://ssthouse.github.io/github-visualization/#/main",imgSrc:X.a},{title:"Depth first traversal",to:"/list/dft",imgSrc:Q.a}]}},methods:{goto:function(t){if(t){if(t.startsWith("http")){var e=document.createElement("a");return e.target="_blank",e.href=t,void e.click()}this.$router.push(t)}}},mounted:function(){}},tt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index-list"},t._l(t.links,function(e){return n("div",{key:e.to,staticClass:"item",on:{click:function(n){t.goto(e.to)}}},[n("span",{staticClass:"title",attrs:{to:e.to}},[t._v(t._s(e.title))]),t._v(" "),n("img",{attrs:{src:e.imgSrc}})])}))},staticRenderFns:[]};var et=n("VU/8")(Y,tt,!1,function(t){n("Ibdn")},null,null).exports;i.default.use(s.a);var nt=new s.a({routes:[{path:"/",redirect:"/list"},{path:"/list",name:"index",component:et},{path:"/list/domRender",name:"domRender",component:A},{path:"/list/patent-suit",name:"patent-suit",component:V},{path:"/list/dft",name:"dft",component:j}]}),it=(n("bfSU"),n("3EgV")),rt=n.n(it);n("7zck");i.default.use(rt.a),i.default.config.productionTip=!1,i.default.prototype.$d3=P,new i.default({el:"#app",router:nt,components:{App:a},template:"<App/>"})},Pfar:function(t,e){},XZz2:function(t,e){},g3VM:function(t,e){},wxyz:function(t,e,n){t.exports=n.p+"static/img/dft-demo.b75d8bd.png"},xzFa:function(t,e){t.exports={guid:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}},zYUX:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a17d243bc143eb92aa38.js.map